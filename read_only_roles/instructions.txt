#### These instructions are not yet tested. The kubeconfig generation process was manually copy and pasting the token.

#dev-kubeconfig and ca.cert files will originally not be there.

kubectl apply -f dev_sa_role_rolebinding.yaml -n kube-system
kubectl apply -f dev_sa_token_secret.yaml -n kube-system
kubectl get configmap -n kube-system kube-root-ca.crt -o jsonpath='{.data.ca\.crt}' > ca.crt
kubectl config set-cluster kubernetes --server=https://10.10.3.10:6443 --certificate-authority=./ca.crt --embed-certs=true --kubeconfig=dev-kubeconfig

kubectl config set-context dev-context --cluster=kubernetes --user=dev-sa --namespace=kube-system --kubeconfig=dev-kubeconfig
kubectl config use-context dev-context --kubeconfig=dev-kubeconfig

#get token
kubectl describe secret/dev-role-token -n kube-system
kubectl config set-credentials dev-sa --token=<dev-sa-token> --kubeconfig=dev-kubeconfig